### 同源策略

1. 什么是同源策略：两个网站同源是指 协议相同、域名相同、端口相同
   1. 虽然说浏览器不允许跨域，但还是有几个元素可以跨域访问外部资源，如`<script>, <img>，<link, iframe>标签等；只要是有src或href的HTML标签都有跨域的能力`
2. 既然浏览器默认的安全策略不允许跨域，那我们**为什么要跨越？**
   1. 我们实际上做项目的时候，不可避免地会根据项目需求进行跨站访问，子域和主域之间数据共享等，受到同源策略的影响，要满足这些需求，就要用跨域技术来实现
3. 目的： 保证用户的信息安全
4. 限制范围： 如果不是同源， 这`cookies，localstorage，indexDB无法读取；DOM无法获得、AJAX`请求不能发送
5. AJAX请求只能发给同源的网站，否则就会报错CORS，有四种方法规避这个限制
   1. 架设服务器代理，浏览器请求同源服务器，再由后者请求外部服务器
   2. JSONP: 动态创建一个`<script>`标签，只能发GET请求
   3. WebSocket
   4. CORS：跨域资源共享（CORS）是一种机制；当一个资源访问到另外一个资源(这个资源放在**不同的域名或者不同的协议或者端口**)，资源就会发起一个**跨域的HTTP请求** 需要浏览器和服务器同时支持；
      1. 整个CORS通信，都是浏览器自动完成。浏览器发现了AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉；
      2. 实现CORS的关键是服务器，只要服务器实现了CORS接口，就可以跨源通信
      3. 服务器对于不同的请求，处理方式不一样； 有简单请求和非简单请求



### 简单请求和非简单请求

1. 简单请求的要求
   1. 请求方法是 HEAD,GET,POST三种方法之一要
   2. HTTP的头部信息不超出规定的几种字段
   3. Content-Type的值 只能是 `application/x-www-form-urlencoded、multipart/form-data、text/plain`
2. 满足上面三个条件的是简单请求，其他的都是非简单请求，浏览器对于这两种请求的处理是不一样的
   1. 非简单的CORS请求，会在正式通信之前，增加一次HTTP的查询请求，称为“预检” 请求，使用的是OPTIONS方法
   2. 预检的是 看服务器是否支持该请求方法， 以及 检查服务器的性能